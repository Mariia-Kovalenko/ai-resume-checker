"use client";
import React, { useState } from "react";
import NavLink from "./nav-link";
import Logo from "../logo/logo";

export default function MainSidebar({ collapsed, setCollapsed, handleNavClick }) {
    const [isMobile, setIsMobile] = React.useState(false);
    React.useEffect(() => {
        const handleResize = () => setIsMobile(window.innerWidth < 640);
        handleResize();
        window.addEventListener("resize", handleResize);
        return () => window.removeEventListener("resize", handleResize);
    }, []);

    const sidebarWidth = collapsed ? "w-[60px]" : "w-[280px]";

    return (
        <aside
            className={`
                h-screen bg-white border-r border-gray-200 flex flex-col
                transition-all duration-300 z-30
                fixed md:relative
                ${sidebarWidth}
                ${collapsed ? "left-[-60px] md:left-0" : "left-0"}
            `}
        >
            {/* Logo and toggle */}
            <div className="flex items-center justify-between px-4 py-6 border-b-1 border-gray-200">
                <div className="flex items-center gap-2">
                    <div className="flex items-center justify-center">
                        <Logo />
                    </div>
                    {!collapsed && (
                        <span className="font-bold text-black text-lg ml-2 text-nowrap">
                            AI Careers
                        </span>
                    )}
                </div>
                <button
                    className="p-1 border-1 border-gray-200 rounded-tr-md rounded-br-md bg-[var(--color-purple)] color-white transition w-[30px] h-[40px] absolute right-[-30px] flex items-center justify-center"
                    // className="ml-2 p-1 border-1 border-gray-200 rounded-md hover:bg-gray-100 transition"
                    onClick={() => setCollapsed((c) => !c)}
                    aria-label="Toggle sidebar"
                >
                    {collapsed ? (
                        <svg
                            width="21"
                            height="21"
                            viewBox="0 0 21 21"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                d="M7.75597 14.6248C7.43052 14.9502 6.90289 14.9502 6.57745 14.6248C6.25202 14.2993 6.25202 13.7717 6.57745 13.4463L9.52371 10.5L6.57745 7.55367C6.25202 7.22825 6.25202 6.70067 6.57745 6.37517C6.90289 6.04975 7.43052 6.04975 7.75597 6.37517L10.7022 9.3215C11.3531 9.97233 11.3531 11.0276 10.7022 11.6785L7.75597 14.6248Z"
                                fill="#fff"
                            />
                            <path
                                d="M11.9226 14.6248C11.5971 14.9502 11.0695 14.9502 10.7441 14.6248C10.4186 14.2993 10.4186 13.7717 10.7441 13.4463L13.6903 10.5L10.7441 7.55367C10.4186 7.22825 10.4186 6.70067 10.7441 6.37517C11.0695 6.04975 11.5971 6.04975 11.9226 6.37517L14.8688 9.3215C15.5197 9.97233 15.5197 11.0276 14.8688 11.6785L11.9226 14.6248Z"
                                fill="#fff"
                            />
                        </svg>
                    ) : (
                        <svg
                            width="21"
                            height="21"
                            viewBox="0 0 21 21"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                                d="M13.244 6.37523C13.5695 6.04979 14.0971 6.04979 14.4226 6.37523C14.748 6.70067 14.748 7.22831 14.4226 7.55374L11.4763 10.5L14.4226 13.4463C14.748 13.7718 14.748 14.2993 14.4226 14.6248C14.0971 14.9503 13.5695 14.9503 13.244 14.6248L10.2978 11.6785C9.64688 11.0277 9.64688 9.97242 10.2978 9.3215L13.244 6.37523Z"
                                fill="#fff"
                            />
                            <path
                                d="M9.07744 6.37523C9.40285 6.04979 9.93052 6.04979 10.2559 6.37523C10.5814 6.70067 10.5814 7.22831 10.2559 7.55374L7.30969 10.5L10.2559 13.4463C10.5814 13.7718 10.5814 14.2993 10.2559 14.6248C9.93052 14.9503 9.40285 14.9503 9.07744 14.6248L6.13119 11.6785C5.48027 11.0277 5.48027 9.97242 6.13119 9.3215L9.07744 6.37523Z"
                                fill="#fff"
                            />
                        </svg>
                    )}
                </button>
            </div>
            {/* Nav links */}
            <nav className="flex-1 flex flex-col gap-2 px-2 py-4">
                <NavLink href="/" collapsed={collapsed} onClick={handleNavClick}>
                    <span className="sidebar-icon">
                        <svg
                            width="22"
                            height="22"
                            viewBox="0 0 22 22"
                            fill="currentColor"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path d="M8.24996 9.16666H9.16663C9.40974 9.16666 9.6429 9.07008 9.81481 8.89818C9.98672 8.72627 10.0833 8.49311 10.0833 8.25C10.0833 8.00688 9.98672 7.77372 9.81481 7.60181C9.6429 7.42991 9.40974 7.33333 9.16663 7.33333H8.24996C8.00684 7.33333 7.77369 7.42991 7.60178 7.60181C7.42987 7.77372 7.33329 8.00688 7.33329 8.25C7.33329 8.49311 7.42987 8.72627 7.60178 8.89818C7.77369 9.07008 8.00684 9.16666 8.24996 9.16666ZM8.24996 11C8.00684 11 7.77369 11.0966 7.60178 11.2685C7.42987 11.4404 7.33329 11.6735 7.33329 11.9167C7.33329 12.1598 7.42987 12.3929 7.60178 12.5648C7.77369 12.7368 8.00684 12.8333 8.24996 12.8333H13.75C13.9931 12.8333 14.2262 12.7368 14.3981 12.5648C14.57 12.3929 14.6666 12.1598 14.6666 11.9167C14.6666 11.6735 14.57 11.4404 14.3981 11.2685C14.2262 11.0966 13.9931 11 13.75 11H8.24996ZM18.3333 8.19499C18.3237 8.11078 18.3053 8.02782 18.2783 7.9475V7.86499C18.2342 7.77074 18.1754 7.6841 18.1041 7.60833L12.6041 2.10833C12.5284 2.03703 12.4417 1.97824 12.3475 1.93416C12.3201 1.93027 12.2923 1.93027 12.265 1.93416C12.1718 1.88076 12.069 1.84648 11.9625 1.83333H6.41663C5.68728 1.83333 4.98781 2.12306 4.47208 2.63878C3.95636 3.15451 3.66663 3.85398 3.66663 4.58333V17.4167C3.66663 18.146 3.95636 18.8455 4.47208 19.3612C4.98781 19.8769 5.68728 20.1667 6.41663 20.1667H15.5833C16.3126 20.1667 17.0121 19.8769 17.5278 19.3612C18.0436 18.8455 18.3333 18.146 18.3333 17.4167V8.25C18.3333 8.25 18.3333 8.24999 18.3333 8.19499ZM12.8333 4.95916L15.2075 7.33333H13.75C13.5068 7.33333 13.2737 7.23675 13.1018 7.06484C12.9299 6.89293 12.8333 6.65978 12.8333 6.41666V4.95916ZM16.5 17.4167C16.5 17.6598 16.4034 17.8929 16.2315 18.0648C16.0596 18.2368 15.8264 18.3333 15.5833 18.3333H6.41663C6.17351 18.3333 5.94035 18.2368 5.76845 18.0648C5.59654 17.8929 5.49996 17.6598 5.49996 17.4167V4.58333C5.49996 4.34021 5.59654 4.10706 5.76845 3.93515C5.94035 3.76324 6.17351 3.66666 6.41663 3.66666H11V6.41666C11 7.14601 11.2897 7.84548 11.8054 8.36121C12.3211 8.87693 13.0206 9.16666 13.75 9.16666H16.5V17.4167ZM13.75 14.6667H8.24996C8.00684 14.6667 7.77369 14.7632 7.60178 14.9351C7.42987 15.1071 7.33329 15.3402 7.33329 15.5833C7.33329 15.8264 7.42987 16.0596 7.60178 16.2315C7.77369 16.4034 8.00684 16.5 8.24996 16.5H13.75C13.9931 16.5 14.2262 16.4034 14.3981 16.2315C14.57 16.0596 14.6666 15.8264 14.6666 15.5833C14.6666 15.3402 14.57 15.1071 14.3981 14.9351C14.2262 14.7632 13.9931 14.6667 13.75 14.6667Z" />
                        </svg>
                    </span>
                    {!collapsed && (
                        <span className="text-nowrap">Resume Check</span>
                    )}
                </NavLink>
                <NavLink href="/dashboard" collapsed={collapsed} onClick={handleNavClick}>
                    <span className="sidebar-icon">
                        <svg
                            width="22"
                            height="19"
                            viewBox="0 0 18 19"
                            fill="currentColor"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path d="M17.8435 3.43478C17.8435 4.08043 17.3153 4.60869 16.6696 4.60869H5.88918C5.24353 4.60869 4.71527 4.08043 4.71527 3.43478C4.71527 2.78913 5.24353 2.26087 5.88918 2.26087H16.6696C17.3153 2.26087 17.8435 2.78913 17.8435 3.43478ZM5.88918 10.6739H12.0131C12.6587 10.6739 13.187 10.1456 13.187 9.5C13.187 8.85434 12.6587 8.32608 12.0131 8.32608H5.88918C5.24353 8.32608 4.71527 8.85434 4.71527 9.5C4.71527 10.1456 5.24353 10.6739 5.88918 10.6739ZM14.537 14.3913H5.88918C5.24353 14.3913 4.71527 14.9196 4.71527 15.5652C4.71527 16.2109 5.24353 16.7391 5.88918 16.7391H14.537C15.1827 16.7391 15.7109 16.2109 15.7109 15.5652C15.7109 14.9196 15.2022 14.3913 14.537 14.3913ZM1.33049 2.16304C0.99788 2.16304 0.665272 2.3 0.430489 2.53478C0.195706 2.76956 0.0391846 3.10217 0.0391846 3.43478C0.0391846 3.76739 0.176141 4.1 0.410924 4.33478C0.645706 4.56956 0.978315 4.70652 1.31092 4.70652C1.64353 4.70652 1.97614 4.56956 2.21092 4.33478C2.44571 4.1 2.58266 3.76739 2.58266 3.43478C2.58266 3.10217 2.44571 2.76956 2.21092 2.53478C1.99571 2.3 1.6631 2.16304 1.33049 2.16304ZM1.33049 8.22826C0.99788 8.22826 0.665272 8.36521 0.430489 8.6C0.195706 8.83478 0.0391846 9.16739 0.0391846 9.5C0.0391846 9.83261 0.176141 10.1652 0.410924 10.4C0.645706 10.6348 0.978315 10.7717 1.31092 10.7717C1.64353 10.7717 1.97614 10.6348 2.21092 10.4C2.44571 10.1652 2.58266 9.83261 2.58266 9.5C2.58266 9.16739 2.44571 8.83478 2.21092 8.6C1.99571 8.36521 1.6631 8.22826 1.33049 8.22826ZM1.33049 14.2935C0.99788 14.2935 0.665272 14.4304 0.430489 14.6652C0.195706 14.9 0.0391846 15.2326 0.0391846 15.5652C0.0391846 15.8978 0.176141 16.2304 0.410924 16.4652C0.645706 16.7 0.978315 16.837 1.31092 16.837C1.64353 16.837 1.97614 16.7 2.21092 16.4652C2.44571 16.2304 2.58266 15.8978 2.58266 15.5652C2.58266 15.2326 2.44571 14.9 2.21092 14.6652C1.99571 14.4304 1.6631 14.2935 1.33049 14.2935Z" />
                        </svg>
                    </span>
                    {!collapsed && (
                        <span className="text-nowrap flex grow-1 items-center justify-between gap-4">
                            Dashboard
                            {/* <span className="border-1 border-gray-200 rounded-md w-[20px] h-[20px] flex items-center justify-center text-[12px] text-xs text-gray-500">
                                0
                            </span> */}
                        </span>
                    )}
                </NavLink>
                {/* <NavLink href="/cover-letter" collapsed={collapsed} onClick={handleNavClick}>
                    <span className="sidebar-icon">
                        <svg
                            width="22"
                            height="22"
                            viewBox="0 0 22 22"
                            fill="currentColor"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path d="M19.25 8.19499C19.2405 8.11078 19.222 8.02782 19.195 7.94749V7.86499C19.1509 7.77074 19.0921 7.6841 19.0208 7.60833L13.5208 2.10833C13.4451 2.03703 13.3584 1.97824 13.2642 1.93416C13.2368 1.93027 13.209 1.93027 13.1817 1.93416C13.0885 1.88076 12.9857 1.84648 12.8792 1.83333H9.16667C8.43732 1.83333 7.73785 2.12306 7.22212 2.63878C6.7064 3.15451 6.41667 3.85398 6.41667 4.58333V5.49999H5.5C4.77065 5.49999 4.07118 5.78973 3.55546 6.30545C3.03973 6.82118 2.75 7.52065 2.75 8.24999V17.4167C2.75 18.146 3.03973 18.8455 3.55546 19.3612C4.07118 19.8769 4.77065 20.1667 5.5 20.1667H12.8333C13.5627 20.1667 14.2622 19.8769 14.7779 19.3612C15.2936 18.8455 15.5833 18.146 15.5833 17.4167V16.5H16.5C17.2293 16.5 17.9288 16.2103 18.4445 15.6945C18.9603 15.1788 19.25 14.4793 19.25 13.75V8.24999C19.25 8.24999 19.25 8.24999 19.25 8.19499ZM13.75 4.95916L16.1242 7.33333H14.6667C14.4236 7.33333 14.1904 7.23675 14.0185 7.06484C13.8466 6.89293 13.75 6.65978 13.75 6.41666V4.95916ZM13.75 17.4167C13.75 17.6598 13.6534 17.8929 13.4815 18.0648C13.3096 18.2368 13.0764 18.3333 12.8333 18.3333H5.5C5.25688 18.3333 5.02373 18.2368 4.85182 18.0648C4.67991 17.8929 4.58333 17.6598 4.58333 17.4167V8.24999C4.58333 8.00688 4.67991 7.77372 4.85182 7.60181C5.02373 7.42991 5.25688 7.33333 5.5 7.33333H6.41667V13.75C6.41667 14.4793 6.7064 15.1788 7.22212 15.6945C7.73785 16.2103 8.43732 16.5 9.16667 16.5H13.75V17.4167ZM17.4167 13.75C17.4167 13.9931 17.3201 14.2263 17.1482 14.3982C16.9763 14.5701 16.7431 14.6667 16.5 14.6667H9.16667C8.92355 14.6667 8.69039 14.5701 8.51849 14.3982C8.34658 14.2263 8.25 13.9931 8.25 13.75V4.58333C8.25 4.34021 8.34658 4.10706 8.51849 3.93515C8.69039 3.76324 8.92355 3.66666 9.16667 3.66666H11.9167V6.41666C11.9167 7.14601 12.2064 7.84548 12.7221 8.36121C13.2378 8.87693 13.9373 9.16666 14.6667 9.16666H17.4167V13.75Z" />
                        </svg>
                    </span>
                    {!collapsed && (
                        <span className="text-nowrap">Cover letter</span>
                    )}
                </NavLink> */}
            </nav>
            {/* Footer */}
            <div className="mt-auto px-4 pb-6">
                <div
                    className={`
                        flex items-center justify-between
                        rounded-full border border-[#E5E7EB] bg-white
                        ${
                            collapsed
                                ? "w-[30px] p-0 justify-center"
                                : "px-4 py-2 w-full"
                        }
                        transition-all duration-300 h-[40px]
                    `}
                >
                    {!collapsed && (
                        <span className="text-[var(--color-dark-purple)] text-xs font-medium text-nowrap">
                            Developed by MariiaTanchuk
                        </span>
                    )}
                    <svg
                        width="20"
                        height="20"
                        viewBox="0 0 20 20"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                            d="M10.035 2.88897C9.69495 2.86397 9.26995 3.00697 9.12495 3.44097L9.15195 3.37697L7.35395 6.97697C7.33695 7.00897 7.34595 6.99497 7.33995 7.00397L3.42395 7.60497L3.49995 7.59997C3.30959 7.60299 3.12442 7.66249 2.96792 7.77092C2.81143 7.87934 2.69066 8.03181 2.62095 8.20897C2.55489 8.38648 2.54097 8.57917 2.58084 8.76433C2.62071 8.94949 2.71269 9.11938 2.84595 9.25397L2.84995 9.25597L5.89795 12.207V12.26L5.20695 16.111L5.21495 16.078C5.11995 16.458 5.27595 16.868 5.56795 17.08C5.85995 17.292 6.27395 17.321 6.62295 17.146H6.62695L10.123 15.348C10.156 15.331 10.16 15.337 10.158 15.338L13.672 17.145L13.623 17.115C14.328 17.585 15.295 16.915 15.086 16.078L14.393 12.215L17.154 9.45297C17.442 9.16597 17.5 8.73497 17.383 8.40597C17.3229 8.23679 17.2219 8.08512 17.089 7.96453C16.956 7.84394 16.7952 7.7582 16.621 7.71497L16.6 7.70897L12.785 7.12297C12.7167 7.08566 12.6544 7.03849 12.6 6.98297L10.848 3.47697L10.885 3.57797C10.778 3.14997 10.375 2.91397 10.035 2.88897ZM9.97495 3.96697L11.789 7.59597L11.846 7.65397C11.946 7.75397 12.117 7.91697 12.377 8.04697L12.447 8.08197L16.379 8.68597L16.381 8.68797C16.3942 8.69275 16.4064 8.70018 16.4167 8.7098C16.427 8.71943 16.4353 8.73106 16.441 8.74397C16.449 8.76597 16.46 8.73397 16.447 8.74597L13.647 11.546C13.5332 11.6552 13.4484 11.7909 13.4 11.941C13.3422 12.1166 13.3507 12.3072 13.424 12.477L14.1 16.24L10.629 14.455L10.754 14.547C10.418 14.211 9.99495 14.293 9.67595 14.453H9.67395L6.19995 16.24L6.89995 12.344V12.3C6.89995 12.2 6.90395 12.102 6.87595 11.964C6.84075 11.807 6.76369 11.6626 6.65295 11.546L6.64895 11.542L3.59795 8.58997L7.47695 7.99397L7.39995 7.99997C7.59836 7.99976 7.79135 7.93519 7.94995 7.81597C8.09995 7.69597 8.18295 7.55397 8.24795 7.42397L9.97495 3.96697Z"
                            fill="url(#paint0_linear_18_69)"
                        />
                        <defs>
                            <linearGradient
                                id="paint0_linear_18_69"
                                x1="2.55895"
                                y1="10.078"
                                x2="15"
                                y2="10.078"
                                gradientUnits="userSpaceOnUse"
                            >
                                <stop stopColor="#000092" />
                                <stop offset="1" stopColor="#FF00F3" />
                            </linearGradient>
                        </defs>
                    </svg>
                </div>
            </div>
        </aside>
    );
}
